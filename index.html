<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Molecule - 5CEO</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/mrjs@latest/dist/mr.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/mrjs@latest/dist/mr.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <!-- <script src="script.js"></script> -->
</head>

<body>

    <mr-app>

        <!-- Menu Panel -->
        <mr-panel data-position="0.2 -0.45 0" class="bar" style="position: fixed;">
            <mr-button class="button" onclick="toggleObjectVisibility()">Molecule On</mr-button>
            <mr-button class="button" onclick="toggleObjectVisibilityOff()">Molecule Off</mr-button>

            <mr-button class="button" onclick="togglePanelVisibility()">Info On</mr-button>
            <mr-button class="button" onclick="togglePanelVisibilityOff()">Info Off</mr-button>

            <mr-button class="button" onclick="location.href='https://www.rcsb.org/structure/5CEO'">More</mr-button>

        </mr-panel>

        <!-- 5CEO Model Loading -->
        <mr-entity id="model" style="visibility:hidden;" data-comp-anchor="type:plane; label: table;">
            <mr-model  data-position="0 0.1 -0.65" class="molecule" src="./assets/5CEO/5ceo.glb" ></mr-model>
        </mr-entity>

        <!-- Information Panel -->
        <mr-entity data-position="0 0 -0.0001">
        <mr-panel id="panel" class="layout" style="visibility: hidden;">
            <mr-text class="title">5CEO Molecule</mr-text>
            <mr-text class="paragraph">
                DLK in complex with inhibitor 2-((6-(3,3-difluoropyrrolidin-1-yl)-4-(1-(oxetan-3-yl)piperidin-4-yl)pyridin-2-yl)amino)isonicotinonitrile\n
                PDB DOI:  https://doi.org/10.2210/pdb5CEO/pdb
                Classification: TRANSFERASE/TRANSFERASE Inhibitor
                Organism(s): Homo sapiens
                Expression System: Trichoplusia ni
                Mutation(s): No 

                Deposited: 2015-07-07 Released: 2015-10-14 
                Deposition Author(s): HARRIS, S.F., YIN, J.
            </mr-text>
        </mr-panel>
    </mr-entity>

    </mr-app>

</body>


<script type="module" src="./script.js"></script>

</html>

<script>

//Model Visibility Functions 

    function toggleObjectVisibility() {
        var object = document.getElementById('model')

        if (object.style.visibility === 'hidden' || object.style.visibility === '') {
            object.style.visibility = 'visible'
           
        }

    }

    function toggleObjectVisibilityOff() {
        var object = document.getElementById('model')
            if (object.style.visibility === 'visible' || object.style.visibility === '') {
                object.style.visibility = 'hidden'
                console.log('object is visible')
            }
        }

//Panel Visibility Functions 

        function togglePanelVisibility() {
        var panel = document.getElementById('panel');

        if (panel.style.visibility === 'hidden' || panel.style.visibility === '') {
            panel.style.visibility = 'visible';
      
    }
}

    function togglePanelVisibilityOff() {
        if (panel.style.visibility === 'visible' || panel.style.visibility === '') {
            panel.style.visibility = 'hidden';
        
    }
    }
    // let rig = document.querySelector('#rig')
    //     let panels = document.querySelectorAll('.layout')

    //     let frontIndex = 0

    // function spread() {
    //         let index = 0
    //         let totalWidth = 0

    //         let forwardVec = getForward(rig)
            
    //         for(let panel of panels) {
    //             totalWidth += panel.width
    //         }
    //         for(let panel of panels) {
    //             if(unfolded) {
    //                 panel.object3D.position.set(0, 0, 0)
    //             } else {
    //                 panel.object3D.position.set(((panel.width) * index) - (totalWidth / panels.length), 0, ((index + 1) % 2) * 0.3)
    //                 index += 1
    //             }

    //             panel.object3D.lookAt(forwardVec)


    //         }

    //         unfolded = !unfolded

    //     }
    

</script>
